package airline_project;

import javax.swing.*;
import java.awt.*;
import java.sql.*;

public class Module5 extends JFrame {
    JTextArea area;
    JButton refresh;
    static final String DB_URL = "jdbc:mysql://localhost:3306/airlinedb";
    static final String DB_USER = "root";
    static final String DB_PASS = "root";

    public Module5() {
        setTitle("âœˆ Airline Reservation Viewer");
        setSize(600, 400);
        setLayout(new BorderLayout());
        area = new JTextArea();
        area.setFont(new Font("Consolas", Font.PLAIN, 14));
        refresh = new JButton("ðŸ”„ Refresh");
        add(new JScrollPane(area), BorderLayout.CENTER);
        add(refresh, BorderLayout.SOUTH);

        refresh.addActionListener(e -> loadData());
        loadData();
    }

    void loadData() {
        try (Connection con = DriverManager.getConnection(DB_URL, DB_USER, DB_PASS);
             Statement st = con.createStatement();
             ResultSet rs = st.executeQuery("SELECT * FROM bookings ORDER BY id DESC")) {
            area.setText("ID | Booking Details\n--------------------------------\n");
            while (rs.next()) {
                area.append(rs.getInt("id") + " | " + rs.getString("details") + "\n");
            }
        } catch (SQLException e) { area.setText("Error: " + e.getMessage()); }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(() -> new Module5().setVisible(true));
    }
}
